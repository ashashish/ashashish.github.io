<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans" rel="stylesheet">
    <title>Landing page with Surfly PIN</title>

    <style type='text/css'>
        html, body {
            min-height: 100vh;
            padding: 0;
            margin: 0;
            box-sizing: border-box;
            font-family: "Open Sans", sans-serif;
            display: flex;
            flex-direction: row;
        }

        .left-half, .right-half {
            width: 50%;
        }

        .left-half {
            background-color: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .image {
            height: 100%;
            width: 100%;
            object-fit: contain;
        }

        .right-half {
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
        }

        h1 {
            font-size: 1.5em;
            text-align: center;
        }

        .tandc-box {
            height: 250px;
            overflow-y: scroll;
            padding: 10px;
            border: 1px solid #ddd;
            background-color: #f9f9f9;
            font-size: 0.9em;
        }

        .code-box {
            text-align: center;
            margin-top: 20px;
            font-size: 1.2em;
            padding: 10px;
            border: 1px solid #4CAF50;
            background-color: #4CAF50;
            color: white;
            display: none; /* Initially hidden */
        }

        .waiting-message {
            text-align: center;
            margin-top: 10px;
            font-size: 1em;
            color: #888;
            display: none; /* Initially hidden */
        }

        /* Media Query for Mobile */
        @media (max-width: 768px) {
            html, body {
                flex-direction: column;
            }

            .left-half, .right-half {
                width: 100%;
            }

            .right-half {
                padding: 15px;
                height: 100vh;
                justify-content: flex-start;
            }

            h1 {
                font-size: 1.2em;
            }

            .tandc-box {
                height: 150px;
                font-size: 0.85em;
            }

            .code-box {
                font-size: 1.2em;
                margin-top: 10px;
            }

            .waiting-message {
                font-size: 1em;
            }

            .accept-button {
                margin-top: 15px;
            }
        }

        .accept-button {
            margin-top: 10px;
            padding: 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
            width: 100%;
            text-align: center;
        }

        .accept-button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
    </style>
</head>

<body>
    <div class="left-half">
        <img src="https://w6.iconnectdata.com/Styles/ICD/icd-banner.png" alt="Image Placeholder" class="image">
    </div>

    <div class="right-half">
        <h1>BY SHARING THE 4-DIGIT PINCODE BELOW WITH THE AGENT, YOU ACKNOWLEDGE THAT YOU HAVE READ, UNDERSTAND, AND AGREE TO THESE TERMS AND CONDITIONS</h1>

        <div class="tandc-box">
            <p>Co-Browsing Session Terms and Conditions</p>
            <!-- Insert new terms and conditions text here -->
1. Introduction
By participating in a co-browsing session with your fuel card provider ("Company") customer service representative ("Representative"), you agree to the following terms and conditions. If you do not agree, please do not proceed with the co-browsing session.
<br>2. Purpose of Co-Browsing
Co-browsing is a tool that allows a Company Representative to view and interact with your web browser in real time. The purpose of the co-browsing session is to enable us to assist you in navigating a Company user interface to manage your fuel card accounts. 
<br>3. Scope of Access
The Representative will have access only to the browser tab you share during the co-browsing session. They will not have access to other tabs, windows, or applications on your device.
The Representative cannot and will not access any files, folders, or personal data on your device.
You retain complete control during the session and can end the co-browsing session at any time by clicking the "X" button or closing your browser tab.
<br>4. Information Shared During Co-Browsing
The Representative will see information displayed in the shared browser tab during the session. Personal information, such as account numbers and passwords, will be masked.  
During the session, you agree not to provide, share, or display personal or sensitive information. The Representative will not ask for such information during the co-browsing session.
<br>5. Privacy and Data Protection
Company values your privacy and will use the information viewed during the co-browsing session solely to assist you with managing your fuel card accounts.
Company is recording the co-browsing session for quality assurance and training purposes, and you expressly agree to such recording.  
The Company's privacy policy ("Privacy Policy") is available on its website. The Privacy Policy provides information about how the Company collects, uses, and shares personal information and describes the choices and rights available to you regarding your personal information.
By agreeing to these terms, you consent to the collection, use, and storage of your data as described herein and in the Privacy Policy.
<br>6. Liability
Company will not be liable for any loss or damage that may arise directly or indirectly from the co-browsing session, except if such losses or damages are caused by Companyâ€™s gross negligence or willful misconduct.
You are responsible for ensuring that sensitive or confidential information is not shared or displayed during the session.
<br>7. Termination of Session
You or the Representative may terminate the co-browsing session at any time.
Company reserves the right to terminate the session if inappropriate content is displayed or if it is being used for purposes other than its intended use.
<br>8. Contact Information
If you have any questions or concerns about these terms and conditions, please use the contact information previously provided to contact the Company.
<br>By proceeding with the co-browsing session, you acknowledge that you have read, understood, and agree to these Terms and Conditions.
        </div>

        <label>
            <input type="checkbox" id="termsCheckbox"> I accept the above Terms and Conditions.
        </label>
        
        <button class="accept-button" id="acceptButton" disabled>Proceed</button>

        <div class="code-box" id="codeBox">
            Your PINCODE: <b><span id="sessidtarget">...</span></b>
        </div>

        <div class="waiting-message" id="waitingMessage">
            Waiting for Agent to join!
        </div>
    </div>

    <script>
        // Enable button only when checkbox is checked
        document.getElementById('termsCheckbox').addEventListener('change', function() {
            document.getElementById('acceptButton').disabled = !this.checked;
        });

        // Surfly snippet
        (function(s,u,r,f,l,y){s[f]=s[f]||{init:function(){s[f].q=arguments}};
        l=u.createElement(r);y=u.getElementsByTagName(r)[0];l.async=1;
        l.src='https://surfly.com/surfly.js';y.parentNode.insertBefore(l,y);})
        (window,document,'script','Surfly');

        // Surfly settings
        var settings = {
            widget_key: "9eb008187dca447685c55d80614e1d18", 
            hide_until_agent_joins: true,
            url: "https://cardholder.comdata.com/"
        };

        // Handle button click
        document.getElementById('acceptButton').addEventListener('click', function() {
            // Hide the button after click
            document.getElementById('acceptButton').style.display = 'none';

            // Initialize Surfly and handle session creation
            Surfly.init(settings, function(init) {
                if (init.success && !Surfly.isInsideSession) {
                    Surfly.session()
                    .on("session_created", function(session, event) {
                        // Display the PIN of the current session
                        document.querySelector("#sessidtarget").innerText = session.pin;
                        // Show the PIN and waiting message
                        document.getElementById('codeBox').style.display = 'block';
                        document.getElementById('waitingMessage').style.display = 'block';
                    })
                    .startLeader();
                } else {
                    console.error("Surfly initialization failed or session is already active.");
                }
            });
        });
    </script>
</body>

</html>
