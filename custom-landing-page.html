<!DOCTYPE html>
<html>
<head>
	<title>Landing Page</title>
</head>
<body>
	<h1>Welcome to our Website</h1>
	<p>Thank you for visiting our website. To get started, please click the button below:</p>
	<button onclick="start()">Start</button>
	<p id="sessidtext" style="display:none">Session Code: <span id="sessidtarget"></span></p>
	<script>
		function start() {
			var firstName = prompt("Please enter your first name:");
			if (!/^[A-Za-z]+$/.test(firstName)) {
				alert("Please enter a valid first name.");
				return;
			}
			var lastName = prompt("Please enter your last name:");
			if (!/^[A-Za-z]+$/.test(lastName)) {
				alert("Please enter a valid last name.");
				return;
			}
			var email = prompt("Please enter your email:");
			if (!/\S+@\S+\.\S+/.test(email)) {
				alert("Please enter a valid email address.");
				return;
			}

			// Start session button
			var startButton = document.createElement("button");
			startButton.innerHTML = "Start Session";
			startButton.onclick = function() {
				startSession(firstName, lastName, email);
			};
			document.body.appendChild(startButton);
		}

		function startSession(firstName, lastName, email) {
			// Call the .startLeader method to start the session with user's information
			Surfly.session()
				.on("session_created", function(session, event) {
					// display the PIN of the current session
					document.querySelector("#sessidtext").style.display = "block";
					document.querySelector("#sessidtarget").innerText = session.pin;
				})
				.startLeader(null, {name: firstName + ' ' + lastName, email: email})
		}
	</script>

	<script>
		(function(s,u,r,f,l,y){
			s[f]=s[f]||{init:function(){s[f].q=arguments}};
			l=u.createElement(r);y=u.getElementsByTagName(r)[0];l.async=1;
			l.src='https://surfly.com/surfly.js';y.parentNode.insertBefore(l,y);
		})(window,document,'script','Surfly');

		var settings = {
			// Surfly session options can be set here, or at the Company/Plan levels.
			widget_key: '9eb008187dca447685c55d80614e1d18',
			hide_until_agent_joins: true,
			session_start_confirmation: false,
            		url: "https://www.google.com"
		};

		Surfly.init(settings, function(initResult) {
			if (initResult.success) {
				// API calls can now be made!
				if (!Surfly.isInsideSession) {
				//	Surfly.button();
				}
			}
			else {
				console.log("Surfly was unable to initialize properly.")
			}
		});
	</script>
</body>
</html>
